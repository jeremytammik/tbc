<p><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="bc.css">
<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js" type="text/javascript"></script></p>
<style>
  ul.toc { list-style-type: none; }
  h1.new { font-size: 150%; }
  h2.new { font-size: 150%; }
  h3.new { font-size: 120%; }
  h4.new { font-size: 120%; }
</style>

<p></head></p>
<!---

twitter:

 the #RevitAPI @AutodeskForge @AutodeskRevit #bim #DynamoBim #ForgeDevCon

&ndash;
...

linkedin:

#bim #DynamoBim #ForgeDevCon #Revit #API #IFC #SDK #AI #VisualStudio #Autodesk #AEC #adsk

the [Revit API discussion forum](http://forums.autodesk.com/t5/revit-api-forum/bd-p/160) thread

<center>
<img src="img/" alt="" title="" width="600"/>
<p style="font-size: 80%; font-style:italic"></p>
</center>

-->

<h3>What's New in the Revit 2022 API</h3>
<p>The Revit 2022 API includes an exceptional list of exciting enhancements for add-in developers, including numerous developer wishes and requests that have now been explicitly addressed:</p>
<ul>
<li><a href="#1">Information sources</a></li>
<li><a href="#2">What's new in previous versions</a></li>
<li><a href="#4">Detailed table of contents</a></li>
</ul>
<p>Table of contents top level:</p>
<ul class="toc">
<li>1 <a href="#4.1">API Changes</a></li>
<ul class="toc">
<li>1.1 <a href="#4.1.1">Parameter API changes (migration to ForgeTypeId)</a></li>
<li>1.2 <a href="#4.1.2">Renamed/replaced Parameter Group members</a></li>
<li>1.3 <a href="#4.1.3">Document & Worksharing API changes</a></li>
<li>1.4 <a href="#4.1.4">Sketched element API changes</a></li>
<li>1.5 <a href="#4.1.5">IndependentTag API Changes</a></li>
<li>1.6 <a href="#4.1.6">Revision API changes</a></li>
<li>1.7 <a href="#4.1.7">Structural reinforcement API changes</a></li>
<li>1.8 <a href="#4.1.8">Import/Export API changes</a></li>
<li>1.9 <a href="#4.1.9">MEP API changes</a></li>
<li>1.10 <a href="#4.1.10">PostableCommand enumeration update</a></li>
<li>1.11 <a href="#4.1.11">BuiltInFailures changes</a></li>
<li>1.12 <a href="#4.1.12">Filter API change</a></li>
<li>1.13 <a href="#4.1.13">Ruby macros no longer supported</a></li>
<li>1.14 <a href="#4.1.14">TransmissionData API change</a></li>
<li>1.15 <a href="#4.1.15">Removal of obsoleted APIs</a></li>
</ul>
<li>2 <a href="#4.2">API Additions</a></li>
<ul class="toc">
<li>2.1 <a href="#4.2.1">Sketched Elements API</a></li>
<li>2.2 <a href="#4.2.2">Color Fill API</a></li>
<li>2.3 <a href="#4.2.3">Export API additions</a></li>
<li>2.4 <a href="#4.2.4">Civil Alignments API</a></li>
<li>2.5 <a href="#4.2.5">DirectShape API Additions</a></li>
<li>2.6 <a href="#4.2.6">Document & Worksharing API additions</a></li>
<li>2.7 <a href="#4.2.7">View API additions</a></li>
<li>2.8 <a href="#4.2.8">Graphics API additions</a></li>
<li>2.9 <a href="#4.2.9">Label API additions</a></li>
<li>2.10 <a href="#4.2.10">Parameter API additions</a></li>
<li>2.11 <a href="#4.2.11">Dimension API additions</a></li>
<li>2.12 <a href="#4.2.12">Category API additions</a></li>
<li>2.13 <a href="#4.2.13">Shared Coordinates API additions</a></li>
<li>2.14 <a href="#4.2.14">Revision API additions</a></li>
<li>2.15 <a href="#4.2.15">Phasing API additions</a></li>
<li>2.16 <a href="#4.2.16">Geometry API additions</a></li>
<li>2.17 <a href="#4.2.17">Point Cloud API additions</a></li>
<li>2.18 <a href="#4.2.18">Schedule API additions</a></li>
<li>2.19 <a href="#4.2.19">Import API additions</a></li>
<li>2.20 <a href="#4.2.20">Structural API additions</a></li>
<li>2.21 <a href="#4.2.21">MEP API additions</a></li>
<li>2.22 <a href="#4.2.22">Energy Analysis API additions</a></li>
</ul>
</ul>

<h4><a name="1"></a>Information Sources</h4>
<p>The information below is based on the contents of the <em>Revit Platform API Changes and Additions.docx</em> document included with
the Revit 2022 SDK, the software developers kit available from
the <a href="https://www.autodesk.com/developer-network/platform-technologies/revit">Revit Developer Centre</a>.</p>
<p>It is also provided in the section on <em>What's New</em> in the Revit 2022 API help file <code>RevitAPI.chm</code> included with the SDK:</p>
<p><center>
<img src="img/whats_new_2022.png" alt="Revit 2022 API help on What's New" title="Revit 2022 API help on What's New" width="567"/> <!-- 1134 -->
</center></p>
<p>For convenient, easy, and effective web searching, this blog post provides a cleaned-up online HTML version of that information with numbering and table of contents added, as well as the following PDF printout of the original document included in the SDK:</p>
<ul>
<li><a href="zip/Revit_Platform_API_Changes_and_Additions_2022.pdf">Revit_Platform_API_Changes_and_Additions_2022.pdf</a></li>
</ul>
<p>The <em>What's New</em> section and the <em>Changes and Additions</em> document provide important information, both for discovering and exploring the newly added API functionality and for later reference.</p>
<p>If you encounter any issues migrating your existing add-ins between different versions, this is one of the first places to look.</p>
<p>For detailed information on all other aspects of the Revit API, please refer to the rest of the API documentation and samples provided in the SDK.</p>
<p>The most important things to install and always keep at hand are:</p>
<ul>
<li>The Revit API help file <code>RevitAPI.chm</code></li>
<li>The Visual Studio solution containing all the SDK samples, <code>Samples\SDKSamples.sln</code></li>
</ul>
<p>You will regularly need both for research on how to solve specific Revit API programming tasks.</p>
<p>More in-depth official explanations and background information is provided by the
online <a href="http://help.autodesk.com/view/RVT/2021/ENU/?guid=Revit_API_Revit_API_Developers_Guide_html">Revit API Developers Guide</a> included
in the <a href="http://help.autodesk.com/view/RVT/2021/ENU">Revit 2021 online help</a>.</p>
<h4><a name="2"></a>What's New in Previous Versions</h4>
<p>Here are links to previous discussions of <em>What's New in the Revit API</em>:</p>
<ul>
<li><a href="http://thebuildingcoder.typepad.com/blog/2013/02/whats-new-in-the-revit-2010-api.html">What's New in the Revit 2010 API</a></li>
<li><a href="http://thebuildingcoder.typepad.com/blog/2013/02/whats-new-in-the-revit-2011-api.html">What's New in the Revit 2011 API</a></li>
<li><a href="http://thebuildingcoder.typepad.com/blog/2013/02/whats-new-in-the-revit-2012-api.html">What's New in the Revit 2012 API</a></li>
<li><a href="http://thebuildingcoder.typepad.com/blog/2013/03/whats-new-in-the-revit-2013-api.html">What's New in the Revit 2013 API</a></li>
<li><a href="http://thebuildingcoder.typepad.com/blog/2013/04/whats-new-in-the-revit-2014-api.html">What's New in the Revit 2014 API</a></li>
<li><a href="http://thebuildingcoder.typepad.com/blog/2014/04/whats-new-in-the-revit-2015-api.html">What's New in the Revit 2015 API</a></li>
<li><a href="http://thebuildingcoder.typepad.com/blog/2015/04/whats-new-in-the-revit-2016-api.html">What's New in the Revit 2016 API</a></li>
<li><a href="http://thebuildingcoder.typepad.com/blog/2016/04/whats-new-in-the-revit-2017-api.html">What's New in the Revit 2017 API</a></li>
<li><a href="http://thebuildingcoder.typepad.com/blog/2016/11/whats-new-in-the-revit-20171-api.html">What's New in the Revit 2017.1 API</a></li>
<li><a href="http://thebuildingcoder.typepad.com/blog/2017/04/whats-new-in-the-revit-2018-api.html">What's New in the Revit 2018 API</a></li>
<li><a href="http://thebuildingcoder.typepad.com/blog/2017/08/revit-20181-and-the-visual-materials-api.html">Revit 2018.1 and the Visual Materials API</a></li>
<li><a href="http://thebuildingcoder.typepad.com/blog/2017/09/revit-201811-fixes-cropbox-setting.html">Revit 2018.1.1 and 2018.1 API Docs Online</a></li>
<li><a href="http://thebuildingcoder.typepad.com/blog/2017/11/modifying-material-visual-appearance.html">Revit 2018.1 Visual Materials API</a></li>
<li><a href="http://thebuildingcoder.typepad.com/blog/2017/12/whats-new-in-the-revit-20182-api.html">What's New in the Revit 2018.2 API</a></li>
<li><a href="http://thebuildingcoder.typepad.com/blog/2018/04/whats-new-in-the-revit-2019-api.html">What's New in the Revit 2019 API</a></li>
<li><a href="https://thebuildingcoder.typepad.com/blog/2019/04/whats-new-in-the-revit-2020-api.html">What's New in the Revit 2020 API</a></li>
<li><a href="https://thebuildingcoder.typepad.com/blog/2019/09/whats-new-in-the-revit-20201-api.html">What's New in the Revit 2020.1 API</a></li>
<li><a href="https://thebuildingcoder.typepad.com/blog/2020/04/whats-new-in-the-revit-2021-api.html">What's New in the Revit 2021 API</a></li>
<li><a href="https://thebuildingcoder.typepad.com/blog/2020/08/revit-20211-sdk-and-whats-new.html">What's New in the Revit 2021.1 API</a></li>
</ul>
<h4><a name="4"></a>Detailed Table of Contents</h4>
<!-- <h1>Major changes and renovations to the Revit API -->

<ul class="toc">
<li>1 <a href="#4.1">API Changes</a></li>
<ul class="toc">
<li>1.1 <a href="#4.1.1">Parameter API changes (migration to ForgeTypeId)</a></li>
<ul class="toc">
<li>1.1.1 <a href="#4.1.1.1">Changes to Parameter Access APIs</a></li>
<li>1.1.2 <a href="#4.1.1.2">Changes to Parameter Definition APIs</a></li>
<li>1.1.3 <a href="#4.1.1.3">Changes to Shared Parameter Creation and Binding APIs</a></li>
<li>1.1.4 <a href="#4.1.1.4">Changes to GlobalParameter APIs</a></li>
<li>1.1.5 <a href="#4.1.1.5">New and changed utility APIs</a></li>
</ul>
<li>1.2 <a href="#4.1.2">Renamed/replaced Parameter Group members</a></li>
<li>1.3 <a href="#4.1.3">Document & Worksharing API changes</a></li>
<ul class="toc">
<li>1.3.1 <a href="#4.1.3.1">SaveAsCloudModel() now supports save of a new Revit Cloud Worksharing central model</a></li>
<li>1.3.2 <a href="#4.1.3.2">Revit Links to Cloud Models</a></li>
<li>1.3.3 <a href="#4.1.3.3">Worksharing API exception changes</a></li>
<li>1.3.4 <a href="#4.1.3.4">Worksharing API replacements</a></li>
</ul>
<li>1.4 <a href="#4.1.4">Sketched element API changes</a></li>
<ul class="toc">
<li>1.4.1 <a href="#4.1.4.1">Floor creation API replacements</a></li>
</ul>
<li>1.5 <a href="#4.1.5">IndependentTag API Changes</a></li>
<ul class="toc">
<li>1.5.1 <a href="#4.1.5.1">Rotation</a></li>
<li>1.5.2 <a href="#4.1.5.2">Multiple References</a></li>
</ul>
<li>1.6 <a href="#4.1.6">Revision API changes</a></li>
<li>1.7 <a href="#4.1.7">Structural reinforcement API changes</a></li>
<li>1.8 <a href="#4.1.8">Import/Export API changes</a></li>
<ul class="toc">
<li>1.8.1 <a href="#4.1.8.1">Import() and Link() methods now treat View as optional</a></li>
<li>1.8.2 <a href="#4.1.8.2">Export API replacements</a></li>
</ul>
<li>1.9 <a href="#4.1.9">MEP API changes</a></li>
<ul class="toc">
<li>1.9.1 <a href="#4.1.9.1">Electrical API changes</a></li>
<li>1.9.2 <a href="#4.1.9.2">Fabrication API changes</a></li>
</ul>
<li>1.10 <a href="#4.1.10">PostableCommand enumeration update</a></li>
<li>1.11 <a href="#4.1.11">BuiltInFailures changes</a></li>
<li>1.12 <a href="#4.1.12">Filter API change</a></li>
<li>1.13 <a href="#4.1.13">Ruby macros no longer supported</a></li>
<li>1.14 <a href="#4.1.14">TransmissionData API change</a></li>
<li>1.15 <a href="#4.1.15">Removal of obsoleted APIs</a></li>
</ul>
<li>2 <a href="#4.2">API Additions</a></li>
<ul class="toc">
<li>2.1 <a href="#4.2.1">Sketched Elements API</a></li>
<ul class="toc">
<li>2.1.1 <a href="#4.2.1.1">Ceiling creation</a></li>
<li>2.1.2 <a href="#4.2.1.2">Floor APIs</a></li>
<li>2.1.3 <a href="#4.2.1.3">Wall APIs</a></li>
<li>2.1.4 <a href="#4.2.1.4">Slanted and Tapered Walls</a></li>
<li>2.1.5 <a href="#4.2.1.5">Sketch APIs</a></li>
<li>2.1.6 <a href="#4.2.1.6">Editing Sketches with SketchEditScope</a></li>
<li>2.1.7 <a href="#4.2.1.7">Boundary validation for sketched elements</a></li>
<li>2.1.8 <a href="#4.2.1.8">CompoundStructure API</a></li>
</ul>
<li>2.2 <a href="#4.2.2">Color Fill API</a></li>
<ul class="toc">
<li>2.2.1 <a href="#4.2.2.1">Color Fill Schemes</a></li>
<li>2.2.2 <a href="#4.2.2.2">Color Fill Scheme Entries</a></li>
<li>2.2.3 <a href="#4.2.2.3">View access to Color Fills</a></li>
<li>2.2.4 <a href="#4.2.2.4">Color Fill Legends</a></li>
</ul>
<li>2.3 <a href="#4.2.3">Export API additions</a></li>
<ul class="toc">
<li>2.3.1 <a href="#4.2.3.1">Export to PDF</a></li>
<li>2.3.2 <a href="#4.2.3.2">PDF Export Settings</a></li>
</ul>
<li>2.4 <a href="#4.2.4">Civil Alignments API</a></li>
<li>2.5 <a href="#4.2.5">DirectShape API Additions</a></li>
<ul class="toc">
<li>2.5.1 <a href="#4.2.5.1">Reference Curves, Planes, and Points</a></li>
<li>2.5.2 <a href="#4.2.5.2">External Geometry</a></li>
<li>2.5.3 <a href="#4.2.5.3">Custom Family names</a></li>
</ul>
<li>2.6 <a href="#4.2.6">Document & Worksharing API additions</a></li>
<ul class="toc">
<li>2.6.1 <a href="#4.2.6.1">Cloud Model API additions</a></li>
<li>2.6.2 <a href="#4.2.6.2">OpenOptions API</a></li>
</ul>
<li>2.7 <a href="#4.2.7">View API additions</a></li>
<ul class="toc">
<li>2.7.1 <a href="#4.2.7.1">Label for views on sheets (Viewport)</a></li>
<li>2.7.2 <a href="#4.2.7.2">Callout view</a></li>
<li>2.7.3 <a href="#4.2.7.3">Grids in 3D views</a></li>
</ul>
<li>2.8 <a href="#4.2.8">Graphics API additions</a></li>
<ul class="toc">
<li>2.8.1 <a href="#4.2.8.1">Temporary in-canvas graphics</a></li>
</ul>
<li>2.9 <a href="#4.2.9">Label API additions</a></li>
<li>2.10 <a href="#4.2.10">Parameter API additions</a></li>
<li>2.11 <a href="#4.2.11">Dimension API additions</a></li>
<ul class="toc">
<li>2.11.1 <a href="#4.2.11.1">Dimension layout</a></li>
<li>2.11.2 <a href="#4.2.11.2">DimensionType prefix/suffix</a></li>
</ul>
<li>2.12 <a href="#4.2.12">Category API additions</a></li>
<ul class="toc">
<li>2.12.1 <a href="#4.2.12.1">Built in Categories</a></li>
</ul>
<li>2.13 <a href="#4.2.13">Shared Coordinates API additions</a></li>
<ul class="toc">
<li>2.13.1 <a href="#4.2.13.1">Reset Shared Coordinates</a></li>
<li>2.13.2 <a href="#4.2.13.2">Clipped state of BasePoint</a></li>
</ul>
<li>2.14 <a href="#4.2.14">Revision API additions</a></li>
<li>2.15 <a href="#4.2.15">Phasing API additions</a></li>
<li>2.16 <a href="#4.2.16">Geometry API additions</a></li>
<li>2.17 <a href="#4.2.17">Point Cloud API additions</a></li>
<li>2.18 <a href="#4.2.18">Schedule API additions</a></li>
<ul class="toc">
<li>2.18.1 <a href="#4.2.18.1">Multiple Value Indication &ndash; schedule customization</a></li>
</ul>
<li>2.19 <a href="#4.2.19">Import API additions</a></li>
<ul class="toc">
<li>2.19.1 <a href="#4.2.19.1">Import/Link Rhino</a></li>
</ul>
<li>2.20 <a href="#4.2.20">Structural API additions</a></li>
<ul class="toc">
<li>2.20.1 <a href="#4.2.20.1">Moving individual rebar in a Rebar Set</a></li>
<li>2.20.2 <a href="#4.2.20.2">Removing individual bars from a Rebar Set</a></li>
<li>2.20.3 <a href="#4.2.20.3">Moving and Removing bars owned by PathReinforcement</a></li>
<li>2.20.4 <a href="#4.2.20.4">Area Reinforcement Layers</a></li>
<li>2.20.5 <a href="#4.2.20.5">Rebar conversion</a></li>
<li>2.20.6 <a href="#4.2.20.6">Rebar geometry</a></li>
<li>2.20.7 <a href="#4.2.20.7">Freeform Rebar</a></li>
</ul>
<li>2.21 <a href="#4.2.21">MEP API additions</a></li>
<ul class="toc">
<li>2.21.1 <a href="#4.2.21.1">Building and Space Type additions</a></li>
<li>2.21.2 <a href="#4.2.21.2">Zone additions</a></li>
<li>2.21.3 <a href="#4.2.21.3">Mechanical Systems Analysis Set Points</a></li>
<li>2.21.4 <a href="#4.2.21.4">Analysis Report Style</a></li>
<li>2.21.5 <a href="#4.2.21.5">MEP Hidden Line Settings</a></li>
<li>2.21.6 <a href="#4.2.21.6">Electrical Panel Schedule</a></li>
<li>2.21.7 <a href="#4.2.21.7">Conversion to Fabrication</a></li>
</ul>
<li>2.22 <a href="#4.2.22">Energy Analysis API additions</a></li>
</ul>
</ul>

<p></p>

<p><center>
<div style="border-style:solid; border-width:2px 0px 2px 0px">
<a name="4.1"></a><h1 class="new" style="font-weight: bold">API Changes</h1>
</div>
</center></p>
<p><a name="4.1.1"></a><h2 class="new">1.1. Parameter API changes (migration to ForgeTypeId)</h2></p>
<p>In Revit 2021, Revit API functionality for units of measurement migrated from enumerated identifiers to extensible identifiers represented by the ForgeTypeId class. ForgeTypeId is now used as the identifier type for more data structures in the Revit API.</p>
<p>A ForgeTypeId instance holds a string, called a "typeid", that uniquely identifies a Forge schema. A Forge schema is a JSON document describing a data structure, supporting data interchange between applications. A typeid string includes a namespace and version number and may look something like "autodesk.spec.aec:length-1.0.0" or "autodesk.unit.unit:meters-1.0.0".  By default, comparison of ForgeTypeId values in the Revit API ignores the version number.</p>
<p>The new classes:</p>
<ul>
<li>Autodesk.Revit.DB.DisciplineTypeId</li>
<li>Autodesk.Revit.DB.GroupTypeId</li>
<li>Autodesk.Revit.DB.ParameterTypeId</li>
</ul>
<p>contain properties of type ForgeTypeId, following the pattern established in Revit 2021 with the UnitTypeId, SymbolTypeId, and SpecTypeId classes. Values from the DisciplineTypeId class can be used in code to replace values of the deprecated UnitGroup enumeration. For example, where you previously used UnitGroup.Structural, you would now use DisciplineTypeId.Structural. Values from the GroupTypeId and ParameterTypeId classes can be used to replace values of the BuiltInParameter and BuiltInParameterGroup enumerations, respectively, which have not yet been deprecated.</p>
<p>The SpecTypeId class contains several new nested classes containing ForgeTypeId properties identifying non-floating-point data types, such as integers and strings. ForgeTypeId properties in SpecTypeId and its nested classes can be used to replace values of the deprecated ParameterType enumeration.  This table lists the deprecated types and their replacements:</p>
<ul>
<li>Deprecated enumeration &rarr; Replacement</li>
<li>UnitGroup &rarr; DisciplineTypeId</li>
<li>ParameterType &rarr; SpecTypeId, SpecTypeId.Boolean, SpecTypeId.Int, SpecTypeId.Reference, SpecTypeId.String</li>
</ul>
<p>Here are some further migrated types where the original enumeration is not yet fully deprecated:</p>
<ul>
<li>Original enumeration &rarr; Preferred replacements as ForgeTypeId</li>
<li>BuiltInParameterGroup &rarr; GroupTypeId</li>
<li>BuiltInParameter &rarr; ParameterTypeId</li>
</ul>
<p>The mapping of enumerations to different ForgeTypeId members has implications for previously existing APIs related to parameter access, parameter definitions, shared parameter creation and binding, global parameters and other utilities.</p>
<p><a name="4.1.1.1"></a><h3 class="new">1.1.1. Changes to Parameter Access APIs</h3></p>
<ul>
<li>Original member &rarr; Preferred replacement</li>
<li>Document.TypeOfStorage[BuiltInParameter] &rarr; Document.GetTypeOfStorage(ForgeTypeId)</li>
<li>Element.Parameter[BuiltInParameter] &rarr; Element.GetParameter(ForgeTypeId)</li>
<li>Parameter.Id &rarr; Parameter.GetTypeId()</li>
</ul>
<p><a name="4.1.1.2"></a><h3 class="new">1.1.2. Changes to Parameter Definition APIs</h3></p>
<p>In the Definition class, the ParameterType property and the GetSpecTypeId() method are both deprecated in favor of the new method GetDataType(). GetDataType() is more general than the functions it replaces, providing a data type identifier for any parameter.</p>
<ul>
<li>For parameters associated with units of measurement, GetDataType() returns a measurable spec identifier. Use UnitUtils.IsMeasurableSpec(ForgeTypeId) to detect a measurable spec identifier.</li>
<li>For Family Type parameters, GetDataType() returns a category identifier. Use Category.IsBuiltInCategory(ForgeTypeId) to detect a category identifier.</li>
<li>For all other parameters, GetDataType() returns a spec identifier. Use Parameter.IsSpec(ForgeTypeId) to detect a spec identifier, including measurable specs.</li>
</ul>
<p>Use Parameter.IsValidDataType(ForgeTypeId) to detect any parameter data type identifier &ndash; i.e., any measurable or non-measurable spec or category.</p>
<ul>
<li>Deprecated member &rarr; Replacement member</li>
<li>Definition.GetSpecTypeId(), Definition.ParameterType &rarr; Definition.GetDataType()</li>
</ul>
<p>Preferred replacements for non-deprecated members:</p>
<ul>
<li>Original member &rarr; Preferred replacement</li>
<li>Definition.ParameterGroup &rarr; Definition.GetGroupTypeId()</li>
<li>InternalDefinition.BuiltInParameter &rarr; InternalDefinition.GetParameterTypeId()</li>
<li>InternalDefinition.ParameterGroup &rarr; InternalDefinition.GetGroupTypeId()</li>
<li>InternalDefinition.ParameterGroup &rarr; InternalDefinition.SetGroupTypeId(ForgeTypeId)</li>
<li>InternalDefinition.Id &rarr; InternalDefinition.GetTypeId()</li>
</ul>
<p><a name="4.1.1.3"></a><h3 class="new">1.1.3. Changes to Shared Parameter Creation and Binding APIs</h3></p>
<p>In the ExternalDefinitionCreationOptions class, used to create shared parameters, the implementation now offers better input validation and new capabilities.</p>
<p>The deprecated class constructor and Type property setter taking ParameterType values now throw an exception for input values ParameterType.Invalid or ParameterType.FamilyType. It was not possible to use this interface to create Family Type shared parameters.</p>
<p>However, it is now possible to create Family Type shared parameters using the replacement functions based on ForgeTypeId. The class constructor taking ForgeTypeId and the SetDataType(ForgeTypeId) method accept any spec or category identifier. Using a category identifier produces a Family Type shared parameter of the given category. Use Category.GetBuiltInCategoryTypeId(BuiltInCategory) to obtain the ForgeTypeId identifier for a given category.</p>
<p>Use Parameter.IsValidDataType(ForgeTypeId) to detect any parameter data type identifier &ndash; i.e., any measurable or non-measurable spec or category.</p>
<ul>
<li>Deprecated member &rarr; Replacement member</li>
<li>ExternalDefinitionCreationOptions(string, ParameterType) &rarr; ExternalDefinitionCreationOptions(string, ForgeTypeId)</li>
<li>ExternalDefinitionCreationOptions.Type &rarr; ExternalDefinitionCreationOptions.GetDataType(), ExternalDefinitionCreationOptions.SetDataType(ForgeTypeId)</li>
</ul>
<p>Preferred replacements for non-deprecated members:</p>
<ul>
<li>Original member &rarr; Preferred replacement</li>
<li>BindingMap.Insert(Definition, Binding, BuiltInParameterGroup) &rarr; BindingMap.Insert(Definition, Binding, ForgeTypeId)</li>
<li>BindingMap.ReInsert(Definition, Binding, BuiltInParameterGroup) &rarr; BindingMap.ReInsert(Definition, Binding, ForgeTypeId)</li>
</ul>
<p>Shared parameters can also be created and leveraged in families using members of the FamilyManager class.</p>
<ul>
<li>Deprecated member &rarr; Replacement member</li>
<li>FamilyManager.AddParameter(string, BuiltInParameterGroup, ParameterType, bool) &rarr; FamilyManager.AddParameter(string, ForgeTypeId, ForgeTypeId, bool)</li>
</ul>
<p>Preferred replacements for non-deprecated members:</p>
<ul>
<li>Original member &rarr; Preferred replacement</li>
<li>FamilyManager.AddParameter(ExternalDefinition, BuiltInParameterGroup, bool) &rarr; FamilyManager.AddParameter(ExternalDefinition, ForgeTypeId, bool)</li>
<li>FamilyManager.AddParameter(string, BuiltInParameterGroup, Category, bool) &rarr; FamilyManager.AddParameter(string, ForgeTypeId, Category, bool)</li>
<li>FamilyManager.IsUserAssignableParameterGroup(BuiltInParameterGroup) &rarr; FamilyManager.IsUserAssignableParameterGroup(ForgeTypeId)</li>
<li>FamilyManager.Parameter[BuiltInParameter] &rarr; FamilyManager.GetParameter(ForgeTypeId)</li>
<li>FamilyManager.ReplaceParameter(FamilyParameter, ExternalDefinition, BuiltInParameterGroup, bool) &rarr; FamilyManager.ReplaceParameter(FamilyParameter, ExternalDefinition, ForgeTypeId, bool)</li>
<li>FamilyManager.ReplaceParameter(FamilyParameter, string, BuiltInParameterGroup, bool) &rarr; FamilyManager.ReplaceParameter(FamilyParameter, string, ForgeTypeId, bool)</li>
</ul>
<p><a name="4.1.1.4"></a><h3 class="new">1.1.4. Changes to GlobalParameter APIs </h3></p>
<ul>
<li>Deprecated member &rarr; Replacement member</li>
<li>GlobalParameter.Create(Document, string, ParameterType) &rarr; GlobalParameter.Create(Document, string, ForgeTypeId)</li>
<li>GlobalParameter.IsValidDataType(ParameterType) &rarr; Parameter.IsSpec(ForgeTypeId)</li>
</ul>
<p><a name="4.1.1.5"></a><h3 class="new">1.1.5. New and changed utility APIs</h3></p>
<p>The LabelUtils class, used to obtain user-visible names for enumerations, has several changes according to the mapping from enumerations to ForgeTypeId. In addition to the replacements listed below, a new method:</p>
<ul>
<li>LabelUtils.GetLabelForDiscipline(ForgeTypeId)</li>
</ul>
<p>returns the user visible name corresponding to a Revit discipline in the current Revit language. The implementation of the method:</p>
<ul>
<li>LabelUtils.GetLabelForSpec(ForgeTypeId)</li>
</ul>
<p>has been expanded to accept a ForgeTypeId argument identifying any parameter data type. For a category identifier input, GetLabelForSpec(ForgeTypeId) returns the label of the Family Type spec for that category, e.g. "Family Type: Wall Tags".</p>
<ul>
<li>Deprecated member &rarr; Replacement member</li>
<li>LabelUtils.GetLabelFor(ParameterType) &rarr; LabelUtils.GetLabelForSpec(ForgeTypeId)</li>
</ul>
<p>Preferred replacements for non-deprecated members:</p>
<ul>
<li>Original member &rarr; Preferred replacement</li>
<li>LabelUtils.GetLabelFor(BuiltInParameter) &rarr; LabelUtils.GetLabelForBuiltInParameter(ForgeTypeId)</li>
<li>LabelUtils.GetLabelFor(BuiltInParameter, LanguageType) &rarr; LabelUtils.GetLabelForBuiltInParameter(ForgeTypeId, LanguageType)</li>
<li>LabelUtils.GetLabelFor(BuiltInParameterGroup) &rarr; LabelUtils.GetLabelForGroup(ForgeTypeId)</li>
</ul>
<p>ParameterUtils is a new class with static utility functions related to ForgeTypeId parameter identifiers:</p>
<ul>
<li>ParameterUtils.GetAllBuiltInGroups()</li>
<li>ParameterUtils.GetAllBuiltInParameters()</li>
<li>ParameterUtils.IsBuiltInGroup(ForgeTypeId)</li>
<li>ParameterUtils.IsBuiltInParameter(ForgeTypeId)</li>
</ul>
<p>The ParameterUtils class contains several methods that are new in this release but also deprecated. They are offered only to assist clients in migrating code from the BuiltInParameter and BuiltInParameterGroup enumerations to the ForgeTypeId class.</p>
<p>Introduced for porting assistance but deprecated</p>
<ul>
<li>ParameterUtils.GetBuiltInParameter(ForgeTypeId)</li>
<li>ParameterUtils.GetBuiltInParameterGroup(ForgeTypeId)</li>
<li>ParameterUtils.GetParameterGroupTypeId(BuiltInParameterGroup)</li>
<li>ParameterUtils.GetParameterTypeId(BuiltInParameter)</li>
</ul>
<p>SpecUtils is a new class with static utility functions related to ForgeTypeId spec identifiers:</p>
<ul>
<li>SpecUtils.GetAllSpecs()</li>
<li>SpecUtils.IsSpec(ForgeTypeId)</li>
<li>SpecUtils.IsValidDataType(ForgeTypeId)</li>
</ul>
<p>The SpecUtils class contains two methods that are new in this release but also deprecated. They are offered only to assist clients in migrating code from the ParameterType enumeration to the ForgeTypeId class.</p>
<p>Introduced for porting assistance but deprecated</p>
<ul>
<li>SpecUtils.GetParameterType(ForgeTypeId)</li>
<li>SpecUtils.GetSpecTypeId(ParameterType)</li>
</ul>
<p>Changes were made to UnitUtils to clarify the meaning of some operations and to offer functions related to disciplines.</p>
<p>The methods GetAllSpecs() and IsSpec(ForgeTypeId) are renamed to GetAllMeasurableSpecs() and IsMeasurableSpec(ForgeTypeId) to clarify that they apply only to measurable specs, describing floating-point values associated with units of measurement, and to avoid confusion with the new Parameter class static methods GetAllSpecs() and IsSpec(ForgeTypeId), which apply to specs of all value types.</p>
<p>The new method:</p>
<ul>
<li>UnitUtils.GetAllDisciplines()</li>
</ul>
<p>provides a list of all available Revit disciplines, suitable for iteration. Previously iteration would have used the members of the UnitGroup enumeration.</p>
<ul>
<li>Deprecated &rarr; Replacement</li>
<li>UnitUtils.GetAllSpecs() &rarr; UnitUtils.GetAllMeasurableSpecs()</li>
<li>UnitUtils.GetUnitGroup(ForgeTypeId) &rarr; UnitUtils.GetDiscipline(ForgeTypeId)</li>
<li>UnitUtils.IsSpec(ForgeTypeId) &rarr; UnitUtils.IsMeasurableSpec(ForgeTypeId)</li>
</ul>
<p><a name="4.1.2"></a><h2 class="new">1.2. Renamed/replaced Parameter Group members</h2></p>
<p>As a part of changes made to support externalized parameter groups, three BuiltInParameterGroup enumeration values were renamed:</p>
<ul>
<li>Original &rarr; Replacement</li>
<li>PG_ELECTRICAL &rarr; PG_ELECTRICAL_ENGINEERING</li>
<li>PG_AELECTRICAL &rarr; PG_ELECTRICAL</li>
<li>PG_TERMINTATION &rarr; PG_TERMINATION</li>
</ul>
<p>Note that because the name PG_ELECTRICAL now identifies a different group, client applications which do not adjust will find parameters they create now in "Electrical" instead of "Electrical Engineering".</p>
<p><a name="4.1.3"></a><h2 class="new">1.3. Document &amp; Worksharing API changes</h2></p>
<p><a name="4.1.3.1"></a><h3 class="new">1.3.1. SaveAsCloudModel() now supports save of a new Revit Cloud Worksharing central model</h3></p>
<p>The method:</p>
<ul>
<li>Document.SaveAsCloudModel(Guid, Guid, String, String)</li>
</ul>
<p>has been enhanced to support upload of local workshared file into BIM 360 Design as a Revit Cloud Worksharing central model.</p>
<p>In addition, the exception UnauthenticatedUserException is removed from the documented exceptions for this method.</p>
<p><a name="4.1.3.2"></a><h3 class="new">1.3.2. Revit Links to Cloud Models</h3></p>
<p>The methods:</p>
<ul>
<li>RevitLinkType.Create(Document, ModelPath, RevitLinkOptions)</li>
<li>RevitLinkType.LoadFrom(ModelPath, WorksetConfiguration)</li>
</ul>
<p>have been enhanced to support creation of new cloud model Revit links. You may use ModelPathUtils. ConvertCloudGUIDsToCloudPath() to create a cloud path to use as an argument to these methods.</p>
<p>These other link methods:</p>
<ul>
<li>RevitLinkType.IsLoaded()</li>
<li>RevitLinkType.Load()</li>
<li>RevitLinkType.Reload()</li>
<li>RevitLinkType.Unload()</li>
</ul>
<p>will work with any cloud Revit link created by a Revit user or through the APIs above.</p>
<p><a name="4.1.3.3"></a><h3 class="new">1.3.3. Worksharing API exception changes</h3></p>
<p>Several exceptions have changed from existing worksharing API.   For the method Document.SaveAsCloudModel():</p>
<ul>
<li>Situation &rarr; Previous exception &rarr; Current exception</li>
<li>User doesn't sign in &rarr; ArgumentException &rarr; RevitServerUnauthenticatedUserException</li>
<li>Duplicated model name &rarr; RevitServerInternalException &rarr; RevitServerModelAlreadyExistsException</li>
<li>Hub/Project/Folder doesn't exist &rarr; ArgumentException &rarr; RevitServerUnauthorizedException</li>
<li>Folder is Plans folder or its sub folder &rarr; ArgumentException &rarr; RevitServerUnauthorizedException</li>
<li>Folder doesn't have "Edit" permission &rarr; ArgumentException &rarr; RevitServerUnauthorizedException</li>
</ul>
<p>In addition, the function will now throw RevitServerModelNameBreaksConventionException when the model name breaks the project naming convention.</p>
<p>For the method ModelPathUtils.ConvertCloudGUIDsToCloudPath():</p>
<ul>
<li>Situation &rarr; Previous exception &rarr; Current exception</li>
<li>Region doesn't exist &rarr; RevitServerCommunicationException &rarr; RevitServerUnauthorizedException</li>
<li>Project doesn't exist &rarr; CentralModelMissingException &rarr; RevitServerUnauthorizedException</li>
<li>Model doesn't exist &rarr; No exception &rarr; RevitServerUnauthorizedException</li>
<li>Model exists in a folder that doesn't have the "Edit" permission, but has View above permission &rarr; RevitServerUnauthorizedException &rarr; No exception</li>
</ul>
<p><a name="4.1.3.4"></a><h3 class="new">1.3.4. Worksharing API replacements</h3></p>
<p>Some properties have been removed and replaced in this release. Because these were an immediate replacement, applications referencing the replaced properties will need to be updated immediately for this release.</p>
<ul>
<li>Removed member &rarr; Replaced member</li>
<li>DocumentSavingAsEventArgs.IsSavingAsMasterFile &rarr; DocumentSavingAsEventArgs.IsSavingAsCentralFile</li>
<li>DocumentSavedAsEventArgs.IsSavingAsMasterFile &rarr; DocumentSavedAsEventArgs.IsSavingAsCentralFile</li>
</ul>
<p><a name="4.1.4"></a><h2 class="new">1.4. Sketched element API changes</h2></p>
<p><a name="4.1.4.1"></a><h3 class="new">1.4.1. Floor creation API replacements</h3></p>
<p>The following members have been replaced:</p>
<ul>
<li>Deprecated member &rarr; Replacement member</li>
<li>Autodesk.Revit.Creation.Document.NewFloor() (all overloads) &rarr; Floor.Create(Document document, IList&lt;CurveLoop&gt; profile, ElementId floorTypeId, ElementId levelId)</li>
<li>Autodesk.Revit.Creation.Document.NewSlab() &rarr; Floor.Create(Document document, IList&lt;CurveLoop&gt; profile, ElementId floorTypeId, ElementId levelId, bool isStructural, Line slopeArrow, double slope)</li>
<li>Autodesk.Revit.Creation.Document.NewFoundationSlab() &rarr; Floor.Create(Document document, IList&lt;CurveLoop&gt; profile, ElementId floorTypeId, ElementId levelId)</li>
</ul>
<p><a name="4.1.5"></a><h2 class="new">1.5. IndependentTag API Changes</h2></p>
<p><a name="4.1.5.1"></a><h3 class="new">1.5.1. Rotation</h3></p>
<p>The new property</p>
<ul>
<li>RotationAngle</li>
</ul>
<p>can be used to get or set the rotation of the tag relative to its view.</p>
<p><a name="4.1.5.2"></a><h3 class="new">1.5.2. Multiple References </h3></p>
<p>IndependentTag now supports multiple references to various elements or sub-elements.</p>
<p>A number of properties were deprecated. The users can now access the desired leader or tagged element using their References.</p>
<ul>
<li>Deprecated Member &rarr; Replacement Members</li>
<li>IndependentTag.TaggedLocalElementId &rarr; IndependentTag.GetTaggedLocalElementIds()</li>
<li>IndependentTag.TaggedElementId &rarr; IndependentTag.GetTaggedElementIds()</li>
<li>IndependentTag.GetTaggedLocalElement() &rarr; IndependentTag.GetTaggedLocalElements()</li>
<li>IndependentTag.GetTaggedReference() &rarr; IndependentTag.GetTaggedReferences()</li>
<li>IndependentTag.HasElbow &rarr; IndependentTag.HasLeaderElbow()</li>
<li>IndependentTag.LeaderElbow &rarr; IndependentTag.GetLeaderElbow(), IndependentTag.SetLeaderElbow()</li>
<li>IndependentTag.LeaderEnd &rarr; IndependentTag.GetLeaderEnd(), IndependentTag.SetLeaderEnd()</li>
</ul>
<p>All deprecated members still work in multi leader scenario by using only the first tagged reference.</p>
<p>The new members:</p>
<ul>
<li>IndependentTag.AddReferences()</li>
<li>IndependentTag.RemoveReferences()</li>
<li>IndependentTag. MultiLeader</li>
</ul>
<p>are used to bulk add or remove references from a tag, and to  query if the tag references multiple elements.</p>
<p><a name="4.1.6"></a><h2 class="new">1.6. Revision API changes</h2></p>
<p>RevisionSettings API replacements</p>
<p>The following methods have been deprecated and replaced due to terminology changes in the Revisions user interface:</p>
<ul>
<li>Deprecated API &rarr; Replacement</li>
<li>RevisionSettings.GetNumericRevisionSettings() &rarr; RevisionNumberingSequence.GetAllRevisionNumberingSequences()</li>
<li>RevisionSettings.SetNumericRevisionSettings() &rarr; RevisionNumberingSequence.SetNumericRevisionSettings()</li>
<li>RevisionSettings.GetAlphanumericRevisionSettings() &rarr; RevisionNumberingSequence.GetAllRevisionNumberingSequences()</li>
<li>RevisionSettings.SetAlphanumericRevisionSettings() &rarr; RevisionNumberingSequence.SetAlphanumericRevisionSettings()</li>
</ul>
<p><a name="4.1.7"></a><h2 class="new">1.7. Structural reinforcement API changes</h2></p>
<p>Reinforcement bars now uses two diameter values instead of just one:</p>
<ul>
<li>The model diameter which is used to model the reinforcement bars</li>
<li>The nominal diameter which is used for formula computations</li>
</ul>
<p>The following members were deprecated and replaced.  Note that the deprecated members always reference the bar's "model diameter".</p>
<ul>
<li>Deprecated member &rarr; Replacement members</li>
<li>BarTypeDiameterOptions.BarDiameter &rarr; BarTypeDiameterOptions.BarModelDiameter, BarTypeDiameterOptions.BarNominalDiameter</li>
<li>RebarBarType.BarDiameter &rarr; RebarBarType.BarModelDiameter, RebarBarType.BarNominalDiameter</li>
<li>RebarBendData.BarDiameter &rarr; RebarBendData.BarModelDiameter, RebarBendData.BarNominalDiameter</li>
<li>RebarUpdateCurvesData.GetBarDiameter &rarr; RebarUpdateCurvesData.GetBarModelDiameter, RebarUpdateCurvesData.GetBarNominalDiameter</li>
</ul>
<p><a name="4.1.8"></a><h2 class="new">1.8. Import/Export API changes</h2></p>
<p><a name="4.1.8.1"></a><h3 class="new">1.8.1. Import() and Link() methods now treat View as optional</h3></p>
<p>The methods:</p>
<ul>
<li>Document.Import()</li>
<li>Document.Link()</li>
</ul>
<p>that take a View as an argument have been updated to accept null for that argument. This applies to all overloads of these methods except those that work with DWF. This View argument used to be required, but now null will be used to take an appropriate default action for the import operations.</p>
<p><a name="4.1.8.2"></a><h3 class="new">1.8.2. Export API replacements</h3></p>
<p>The following property has been removed and replaced in this release. Because these were an immediate replacement, applications referencing the replaced property will need to be updated immediately for this release.</p>
<ul>
<li>Removed member &rarr; Replaced member</li>
<li>DGNExportOptions.MasterUnits &rarr; DGNExportOptions.WorkingUnits</li>
</ul>
<p><a name="4.1.9"></a><h2 class="new">1.9. MEP API changes</h2></p>
<p><a name="4.1.9.1"></a><h3 class="new">1.9.1. Electrical API changes</h3></p>
<p>The following method and property have been deprecated;  the old methods referred to temperature in terms on "long", which did not match the capabilities in the UI, and had an error when referring to non-Fahrenheit temperature values.</p>
<ul>
<li>Deprecated API &rarr; Replacement</li>
<li>TemperatureRatingType.AddCorrectionFactor(long temperature, double factor) &rarr; TemperatureRatingType.AddCorrectionFactor(double temperature, double factor)</li>
<li>CorrectionFactor.Temperature &rarr; CorrectionFactor.GetTemperature()</li>
</ul>
<p><a name="4.1.9.2"></a><h3 class="new">1.9.2. Fabrication API changes</h3></p>
<p>In a terminology change, the fabrication service "group" was renamed as a "palette" in order to align with changes made in the Revit user interface.  This affected the following members:</p>
<ul>
<li>Deprecated API &rarr; Replacement</li>
<li>FabricationNetworkChangeService.SetGroupId() &rarr; FabricationNetworkChangeService.SetPaletteId()</li>
<li>FabricationNetworkChangeService.SetRestrictGroup() &rarr; FabricationNetworkChangeService.SetRestrictPalette()</li>
<li>FabricationService.GroupCount &rarr; FabricationService.PaletteCount</li>
<li>FabricationService.IsValidGroupIndex() &rarr; FabricationService.IsValidPaletteIndex()</li>
<li>FabricationService.GetGroupName() &rarr; FabricationService.GetPaletteName()</li>
<li>FabricationService.IsGroupExcluded() &rarr; FabricationService.IsPaletteExcluded()</li>
<li>FabricationService.SetServiceGroupExclusions() &rarr; FabricationService.SetServicePaletteExclusions()</li>
<li>FabricationServiceButton.GroupIndex &rarr; FabricationServiceButton.PaletteIndex</li>
<li>FabricationPartSizeMap.GroupId &rarr; FabricationPartSizeMap.PaletteId</li>
</ul>
<p>The following properties have been deprecated.  Because they are not currently used and relate to not yet available capabilities, there is no replacement for these members.</p>
<ul>
<li>Deprecated API &rarr; Replacement</li>
<li>FabricationConfigurationInfo.CloudVersion &rarr; None</li>
<li>FabricationConfigurationInfo.IsConnected &rarr; None</li>
</ul>
<p><a name="4.1.10"></a><h2 class="new">1.10. PostableCommand enumeration update</h2></p>
<p>Many updates have been made to the PostableCommand enumeration to match the current set of Revit commands.</p>
<p>A good number of commands were newly added to the enumeration:</p>
<ul>
<li>Anchors</li>
<li>BatchPrint</li>
<li>Bolts</li>
<li>Collaborate</li>
<li>CollaborateInCloud</li>
<li>ConnectionSettings</li>
<li>ContourCut</li>
<li>CoordinationModel</li>
<li>CoordinationSelectLink</li>
<li>Cope</li>
<li>CopeSkewed</li>
<li>CopyMonitorSelectLink</li>
<li>CopyMonitorUseCurrentProject</li>
<li>CornerCut</li>
<li>CutBy</li>
<li>CutThrough</li>
<li>DeleteEnergyModel</li>
<li>Dynamo</li>
<li>GetAutodeskContent</li>
<li>GlobalParameters</li>
<li>Holes</li>
<li>ImportImage</li>
<li>ImportPDF</li>
<li>LinkImage</li>
<li>LinkPDF</li>
<li>LinkTopography</li>
<li>LoadAsGroupIntoOpenProjects</li>
<li>LoadFamilyIntoProjectAndClose</li>
<li>LoadIntoProject</li>
<li>LoadRebarShapeIntoProjectAndClose</li>
<li>ManageCloudModels</li>
<li>Miter</li>
<li>Multiplanar</li>
<li>MultiPointRouting</li>
<li>NewFamily</li>
<li>NewProject</li>
<li>OpenFamily</li>
<li>OpenIFC</li>
<li>OpenIFCOptions</li>
<li>OpenProject</li>
<li>Optimize</li>
<li>PAndIDModeler</li>
<li>PAndIDSettings</li>
<li>PathOfTravel</li>
<li>Plate</li>
<li>PublishSettings</li>
<li>RepairCentralModel</li>
<li>ResetSharedCoordinates</li>
<li>RevealObstacles</li>
<li>SaveAsCloudModel</li>
<li>SaveAsFamily</li>
<li>SawCutFlange</li>
<li>SawCutWeb</li>
<li>ShapeStatus</li>
<li>SharedViews</li>
<li>ShearStuds</li>
<li>Shorten</li>
<li>ShowWarningsInViews</li>
<li>SpaceNaming</li>
<li>StructuralConnection</li>
<li>StructuralRebarCoupler</li>
<li>SystemsAnalysis</li>
<li>SystemZone</li>
<li>TitleBlock</li>
<li>ToggleHome</li>
<li>TogglePAndIDModelerBrowser</li>
<li>ToggleRevealHiddenElementsMode</li>
<li>Walkthrough</li>
<li>Welds</li>
<li>WorksharingMonitor</li>
</ul>
<p>Some enumeration values were renamed to match the current naming of the commands in the Revit UI.  There is no way to preserve the old name as obsoleted so code referring to these values will need to be updated:</p>
<ul>
<li>Removed &rarr; Replacement</li>
<li>ExportMassModelGBXML &rarr; ExportGBXML</li>
<li>ModelBrowserContainer &rarr; ToggleHome</li>
<li>PlaceOnHost &rarr; PlaceOnStairOrRamp</li>
<li>Playlist &rarr; DynamoPlayer</li>
<li>RunEnergySimulation &rarr; Generate</li>
<li>ShowEnergyModel &rarr; CreateEnergyModel</li>
<li>UseCurrentProject &rarr; CoordinationReviewUseCurrentProject</li>
</ul>
<p>Finally, some commands have been removed from the Revit UI. These commands can no longer be posted, so the values have been removed from the enumeration:</p>
<ul>
<li>ExportBuildingSite</li>
<li>PublishDGNToAutodeskBuzzsaw</li>
<li>PublishDWFToAutodeskBuzzsaw</li>
<li>PublishDWGToAutodeskBuzzsaw</li>
<li>PublishDXFToAutodeskBuzzsaw</li>
<li>PublishSATToAutodeskBuzzsaw</li>
<li>RecentFiles</li>
<li>ResultsAndCompare</li>
<li>StairBySketch</li>
<li>ViewRange</li>
</ul>
<p><a name="4.1.11"></a><h2 class="new">1.11. BuiltInFailures changes</h2></p>
<p>Some changes have been made to existing BuiltInFailure definitions.  Code that looks for or handles specific failures may need updating, as it is not possible to obsolete the replaced members, so they have been removed in this release.</p>
<ul>
<li>Failure submodule &rarr; Removed FailureDefinition &rarr; Replacement FailureDefinition</li>
<li>WallFailures &rarr; ExtrudedWallMustBeVertical &rarr; ExtrudedWallDisallowedForCrossSectionType</li>
<li>GroupFailures &rarr; FailedToSetMasterGroupId &rarr; FailedToSetLeaderGroupId</li>
</ul>
<p><a name="4.1.12"></a><h2 class="new">1.12. Filter API change</h2></p>
<p>The constructor for the class FilterStringRule has been obsoleted and replaced.  The previous constructor has a Boolean argument for case sensitivity that was not used in View Filters and could not be used properly from the API, as all string comparisons in filters are case-insensitive:</p>
<ul>
<li>Obsoleted member &rarr; Replacement member</li>
<li>FilterStringRule(FilterableValueProvider, FilterStringRuleEvaluator, String, boolean) &rarr; FilterStringRule(FilterableValueProvider, FilterStringRuleEvaluator, String)</li>
</ul>
<p>The method FilterStringRuleEvaluator.Evaluate() still has an argument "caseSensitive", but it's never called by filter code with this argument set to true.</p>
<p><a name="4.1.13"></a><h2 class="new">1.13. Ruby macros no longer supported</h2></p>
<p>Due to technology limitations, the Macro Manager no longer supports Ruby language in Revit Macros. The option to create new Ruby macros has been removed from the UI and API, and existing Ruby Macros in previous version documents will be deleted during upgrade.</p>
<p><a name="4.1.14"></a><h2 class="new">1.14. TransmissionData API change</h2></p>
<p>Autodesk.Revit.DB.TransmissionData.UserData is now used to store the systems analysis reports path, if any report exists in the document. This is to allow eTransmit to include external reports. The API method itself is not changed.</p>
<p><a name="4.1.15"></a><h2 class="new">1.15. Removal of obsoleted APIs</h2></p>
<p>The following previously obsoleted APIs have been removed:</p>
<ul>
<li>ModelPathUtils.ConvertCloudGUIDsToCloudPath(Guid projectId, Guid modelId)</li>
<li>Document.SaveAsCloudModel(String folderId, String modelName)</li>
<li>MEPModel.ElectricalSystems</li>
<li>MEPModel.AssignedElectricalSystems</li>
<li>StructuralConnectionHandler.Create(Document doc, List&lt;ElementId&gt; idsToConnect)</li>
</ul>
<p><center>
<div style="border-style:solid; border-width:2px 0px 2px 0px">
<a name="4.2"></a><h1 class="new" style="font-weight: bold">API Additions</h1>
</div>
</center></p>
<p><a name="4.2.1"></a><h2 class="new">2.1. Sketched Elements API</h2></p>
<p><a name="4.2.1.1"></a><h3 class="new">2.1.1. Ceiling creation</h3></p>
<p>The new methods:</p>
<ul>
<li>Ceiling.Create(Document document, IList&lt;CurveLoop&gt; curveLoops, ElementId ceilingTypeId, ElementId level)</li>
<li>Ceiling.Create(Document document, IList&lt;CurveLoop&gt; curveLoops, ElementId ceilingTypeId, ElementId levelId, Line slopeArrow, double slope)</li>
</ul>
<p>create a new instance of a ceiling in a Revit project, with one overload supporting a sloped ceiling.fac</p>
<p><a name="4.2.1.2"></a><h3 class="new">2.1.2. Floor APIs</h3></p>
<p>In addition to the replacement Floor creation methods described above, the new method:</p>
<ul>
<li>Floor.GetDefaultFloorType(Document document, bool isFoundation)</li>
</ul>
<p>returns the id of the default floor or foundation type for a document.</p>
<p><a name="4.2.1.3"></a><h3 class="new">2.1.3. Wall APIs</h3></p>
<p>The new methods:</p>
<ul>
<li>Wall.CreateProfileSketch()</li>
<li>Wall.RemoveProfileSketch()</li>
<li>Wall.CanHaveProfileSketch()</li>
</ul>
<p>provide access to add and remove profile sketches to wall elements that support them.  Once a sketch is added, the profile sketch can be edited using SketchEditScope.</p>
<p><a name="4.2.1.4"></a><h3 class="new">2.1.4. Slanted and Tapered Walls</h3></p>
<p>The new members:</p>
<ul>
<li>Wall.CrossSection</li>
<li>Wall.IsWallCrossSectionValid()</li>
</ul>
<p>allow assignment of a cross section type to a given wall, and determine if that type can be assigned.</p>
<p>The new enumerations:</p>
<ul>
<li>Autodesk.Revit.DB.WallCrossSection</li>
<li>Autodesk.Revit.DB.WidthMeasuredAt</li>
<li>Autodesk.Revit.DB.InsertOrientation</li>
</ul>
<p>enumerate the values for options related to alternate wall cross section values, especially the options available for Tapered walls.</p>
<p><a name="4.2.1.5"></a><h3 class="new">2.1.5. Sketch APIs</h3></p>
<p>The new methods:</p>
<ul>
<li>Ceiling.SketchId</li>
<li>Floor.SketchId</li>
<li>Wall.SketchId</li>
<li>Opening.SketchId</li>
</ul>
<p>return the id of the element's sketch.</p>
<p>The method:</p>
<ul>
<li>Sketch.OwnerId</li>
</ul>
<p>returns the id of the element that owns this sketch.</p>
<p>The new method:</p>
<ul>
<li>Sketch.GetAllElements()</li>
</ul>
<p>returns the ids of all the elements owned by the sketch, including elements of type:</p>
<ul>
<li>Autodesk.Revit.DB.ModelCurve</li>
<li>Autodesk.Revit.DB.ReferencePlane</li>
<li>Autodesk.Revit.DB.Dimension</li>
</ul>
<p>This method works for any Sketch you can obtain from a Sketch-based element (Ceiling, Extrusion, etc.). It is available both in and outside of a SketchEditScope.</p>
<p><a name="4.2.1.6"></a><h3 class="new">2.1.6. Editing Sketches with SketchEditScope</h3></p>
<p>Using the new class:</p>
<ul>
<li>Autodesk.Revit.DB.SketchEditScope</li>
</ul>
<p>allows an application to edit sketch based elements while preserving the unchanged elements that are already present in the sketch.  While a Sketch editing session is active, you can add, delete or modify Sketch elements (curves, dimensions, reference planes). When you finish the session, the edited Sketch-based element will be updated.  Only certain sketches are currently supported for editing:</p>
<ul>
<li>Ceiling sketches</li>
<li>Floor sketches</li>
<li>Wall profile sketches</li>
<li>Opening sketches</li>
</ul>
<p>using the new members:</p>
<ul>
<li>SketchEditScope constructor &ndash; creates a new SketchEditScope</li>
<li>SketchEditScope.Start() &ndash; starts editing a particular sketch, including starting the associated transaction.  After this is started only elements owned by the Sketch and new elements to be added to the Sketch may be modified.</li>
<li>SketchEditScope.IsSketchEditingSupported() &ndash; checks if a particular sketch can be edited with a SketchEditScope.</li>
</ul>
<p><a name="4.2.1.7"></a><h3 class="new">2.1.7. Boundary validation for sketched elements</h3></p>
<p>The new method:</p>
<ul>
<li>BoundaryValidation.IsValidHorizontalBoundary()</li>
</ul>
<p>validates input curves form a valid horizontal boundary for Ceiling or Floor creation.</p>
<p><a name="4.2.1.8"></a><h3 class="new">2.1.8. CompoundStructure API</h3></p>
<p>The new method:</p>
<ul>
<li>CompoundStructure.CanSplitAndMergeRegionsBeUsed()</li>
</ul>
<p>checks whether split and merge regions operations can be used for this compound structure.  This validator is associated with the use of the existing MergeRegionsAdjacentToSegment() and SplitRegion() methods.</p>
<p><a name="4.2.2"></a><h2 class="new">2.2. Color Fill API</h2></p>
<p>Multiple new classes provide access to color fills.  These classes expose  color   fill schemes, entries and color   fill legends.  You can also also a ccess  the color  fill scheme applied to a particular view.</p>
<p><a name="4.2.2.1"></a><h3 class="new">2.2.1. Color Fill Schemes</h3></p>
<p>The new class:</p>
<ul>
<li>Autodesk.Revit.DB.ColorFillScheme</li>
</ul>
<p>represents a color scheme that can be applied to plan and section views.
Key new members of this class include:</p>
<ul>
<li>ColorFillScheme.AddEntry()</li>
<li>ColorFillScheme.RemoveEntry()</li>
<li>ColorFillScheme.UpdateEntry()</li>
<li>ColorFillScheme.GetEntries()</li>
<li>ColorFillScheme.SetEntries()</li>
<li>ColorFillScheme.SortEntries()</li>
<li>ColorFillScheme.AreaSchemeId</li>
<li>ColorFillScheme.CategoryId</li>
<li>ColorFillScheme.ParameterDefinition</li>
<li>ColorFillScheme.StorageType</li>
<li>ColorFillScheme.Title</li>
<li>ColorFillScheme.Duplicate</li>
<li>ColorFillScheme.GetFormatOptions()</li>
<li>ColorFillScheme.SetFormatOptions()</li>
<li>ColorFillScheme.GetSupportedParameterIds()</li>
</ul>
<p><a name="4.2.2.2"></a><h3 class="new">2.2.2. Color Fill Scheme Entries</h3></p>
<p>The new class:</p>
<ul>
<li>Autodesk.Revit.DB.ColorFillSchemeEntry</li>
</ul>
<p>represents an entry in a color scheme.
Key new members of this class include:</p>
<ul>
<li>ColorFillSchemeEntry.Color</li>
<li>ColorFillSchemeEntry.FillPatternId</li>
<li>ColorFillSchemeEntry.Caption</li>
<li>ColorFillSchemeEntry.StorageType</li>
<li>ColorFillSchemeEntry.IsVisible</li>
<li>ColorFillSchemeEntry.IsInUse</li>
<li>ColorFillSchemeEntry.GetIntegerValue()</li>
<li>ColorFillSchemeEntry.GetDoubleValue</li>
<li>ColorFillSchemeEntry.GetStringValue()</li>
<li>ColorFillSchemeEntry.GetElementIdValue()</li>
<li>ColorFillSchemeEntry.SetIntegerValue()</li>
<li>ColorFillSchemeEntry.SetDoubleValue()</li>
<li>ColorFillSchemeEntry.SetStringValue()</li>
<li>ColorFillSchemeEntry.SetElementIdValue()</li>
</ul>
<p><a name="4.2.2.3"></a><h3 class="new">2.2.3. View access to Color Fills</h3></p>
<p>The new members:</p>
<ul>
<li>View.GetColorFillSchemeId()</li>
<li>View.SetColorFillSchemeId()</li>
</ul>
<p>provide access to read and apply the color fill scheme associated with a particular category in the view.</p>
<p><a name="4.2.2.4"></a><h3 class="new">2.2.4. Color Fill Legends</h3></p>
<p>The new class:</p>
<ul>
<li>Autodesk.Revit.DB.ColorFillLegend</li>
</ul>
<p>offers the ability to create, read and modify properties of color fill legend annotation elements in a particular owner view.
Key new members of this class include:</p>
<ul>
<li>ColorFillLegend.Create()</li>
<li>ColorFillLegend.GetColumnWidths()</li>
<li>ColorFillLegend.SetColumnWidths()</li>
<li>ColorFillLegend.ColorFillCategoryId</li>
<li>ColorFillLegend.Height</li>
<li>ColorFillLegend.Origin</li>
</ul>
<p><a name="4.2.3"></a><h2 class="new">2.3. Export API additions</h2></p>
<p><a name="4.2.3.1"></a><h3 class="new">2.3.1. Export to PDF</h3></p>
<p>The new method:</p>
<ul>
<li>Document.Export(String, IList&lt;ElementId&gt;, PDFExportOptions)</li>
</ul>
<p>exports one or more views and sheets in PDF format.</p>
<p>The options provided, in the new class:</p>
<ul>
<li>Autodesk.Revit.DB.PDFExportOptions</li>
</ul>
<p>include graphical options, paper and output format options, and the option to combine output views and sheets into a single PDF or to produce a different PDF for each view and sheet with a specific naming convention.</p>
<p><a name="4.2.3.2"></a><h3 class="new">2.3.2. PDF Export Settings</h3></p>
<p>The new element class:</p>
<ul>
<li>Autodesk.Revit.DB.ExportPDFSettings</li>
</ul>
<p>represents a named stored PDF export option available in a document.    You can use this class to extract the options from this element to use for exporting to PDF, or modify or create new stored settings with different options.</p>
<p><a name="4.2.4"></a><h2 class="new">2.4. Civil Alignments API</h2></p>
<p>Revit now provides support for Civil Alignments and their associated annotations. Alignments are imported from InfraWorks as a part of the workflow to transfer Civil Structures. The API supports read of alignment properties and geometric information, along with read/write and create of associated annotations. All new classes for the Alignments API are exposed through a different assembly in the Revit installation, located at</p>
<ul>
<li>Addins\CivilAlignments\Autodesk.CivilAlignments.DBApplication.dll</li>
</ul>
<p>The new class:</p>
<ul>
<li>Autodesk.Revit.DB.Infrastructure.Alignment</li>
</ul>
<p>represents an alignment and can be used to find alignments in a document, and to query a particular alignment's properties and to analyze alignment geometry. This object is not an Element, but the underlying Element can be obtained from this object if needed.</p>
<p>The new class:</p>
<ul>
<li>Autodesk.Revit.DB.Infrastructure.AlignmentStationLabel</li>
</ul>
<p>represents an alignment station label annotation and can be used to find such labels in a document as well as to create and modify such labels. This object is not an Element, but the underlying Element (which is a SpotDimension instance) can be obtained from this object if needed.</p>
<p>The new classes:</p>
<ul>
<li>Autodesk.Revit.DB.Infrastructure.AlignmentStationLabelOptions</li>
<li>Autodesk.Revit.DB.Infrastructure.AlignmentStationLabelSetOptions</li>
</ul>
<p>provide options for creating a single alignment label or for creating a set of alignment labels.</p>
<p><a name="4.2.5"></a><h2 class="new">2.5. DirectShape API Additions</h2></p>
<p><a name="4.2.5.1"></a><h3 class="new">2.5.1. Reference Curves, Planes, and Points</h3></p>
<p>The new methods:</p>
<ul>
<li>DirectShape.AddReferenceCurve()</li>
<li>DirectShape.AddReferencePlane()</li>
<li>DirectShape.AddReferencePoint()</li>
<li>DirectShapeType.AddReferenceCurve()</li>
<li>DirectShapeType.AddReferencePlane()</li>
<li>DirectShapeType.AddReferencePoint()</li>
</ul>
<p>enable the creation of reference curves, planes and points inside DirectShape elements.   Explicit bounds can be provided for direct shape reference curves and planes.  Revit tools that can use named references within families will also be able to select the references inside the DirectShape elements.</p>
<p>The overloads for these methods include an optional DirectShapeReferenceOptions input.
Use:</p>
<ul>
<li>DirectShapeReferenceOptions.Name</li>
</ul>
<p>to set the assigned name for the reference.  If the name is specified, it is visible when picking the reference's geometry. Otherwise, the default DirectShape element name is displayed.</p>
<p>The new validator:</p>
<ul>
<li>DirectShapeReferenceOptions.IsValidReferenceName()</li>
</ul>
<p>validates the name assigned to DirectShapeReferenceOptions.Name.</p>
<p>The new validators:</p>
<ul>
<li>DirectShape.IsValidReferenceCurve()</li>
<li>DirectShape.IsValidReferencePlaneBoundingBoxUV()</li>
<li>DirectShapeType.IsValidReferenceCurve()</li>
<li>DirectShapeType.IsValidReferencePlaneBoundingBoxUV()</li>
</ul>
<p>validates the inputs needed for specifying a plane or curve explicit reference in the DirectShape.</p>
<p><a name="4.2.5.2"></a><h3 class="new">2.5.2. External Geometry</h3></p>
<p>The new class:</p>
<ul>
<li>ExternalGeometryId</li>
</ul>
<p>represents an identifier for geometry from external sources.</p>
<p>The new members:</p>
<ul>
<li>ExternalGeometryId.IsValidExternalGeometryId()</li>
<li>ExternalGeometryId.Id</li>
</ul>
<p>provide validation of an identifier and a means to access the identifier as a String.</p>
<p>The new class:</p>
<ul>
<li>ExternallyTaggedGeometryObject</li>
</ul>
<p>serves as a base class for externally tagged geometry.</p>
<p>The new members:</p>
<ul>
<li>ExternallyTaggedGeometryObject.ExternalId</li>
</ul>
<p>provides the ExternalGeometryId associated with the geometry.</p>
<p>The new class:</p>
<ul>
<li>ExternallyTaggedNonBRep</li>
</ul>
<p>represents non-BRep geometry with an external identifier.</p>
<p>The new class:</p>
<ul>
<li>ExternallyTaggedBRep</li>
</ul>
<p>represents BRep (Solid) geometry with external identifiers for the BRep itself and any subset of Faces or Edges.</p>
<p>The new class:</p>
<ul>
<li>BRepBuilderPersistentIds</li>
</ul>
<p>Provides a mechanism to associate external identifiers with geometry created by a BRepBuilder.</p>
<p>The new members:</p>
<ul>
<li>BRepBuilderPersistentIds.AddSubTag()</li>
<li>BRepBuilderPersistentIds.IsValidExternalGeometryIdForNewCorrespondence()</li>
<li>BRepBuilderPersistentIds.IsValidBRepBuilderGeometryIdForNewCorrespondence()</li>
<li>BRepBuilderPersistentIds.IsAssociatedBRepBuilderValid()</li>
<li>BRepBuilderPersistentIds.IsBRepBuilderGeometryIdFaceOrEdge()</li>
</ul>
<p>provide an ability to associate “tags” with Faces and Edges created by BRepBuilder.</p>
<p>A new member:</p>
<ul>
<li>BRepBuilder.GetResult()</li>
</ul>
<p>accepting a BRepBuilderPersistentIds has been added which returns an ExternallyTaggedBRep.</p>
<p>The new class:</p>
<ul>
<li>ExternallyTaggedGeometryValidation</li>
</ul>
<p>provides validators</p>
<ul>
<li>ExternallyTaggedGeometryValidation.IsValidGeometry</li>
<li>ExternallyTaggedGeometryValidation.IsNonSolid</li>
<li>ExternallyTaggedGeometryValidation.IsSolid</li>
</ul>
<p>to help determine validity of a GeometryObject for use with the new externally tagged geometry.</p>
<p>The new members:</p>
<ul>
<li>DirectShape.AddExternallyTaggedGeometry()</li>
<li>DirectShape.GetExternallyTaggedGeometry()</li>
<li>DirectShape.HasExternallyTaggedGeometry()</li>
<li>DirectShape.UpdateExternallyTaggedGeometry()</li>
<li>DirectShape.RemoveExternallyTaggedGeometry()</li>
<li>DirectShape.ResetExternallyTaggedGeometry()</li>
<li>DirectShapeType.AddExternallyTaggedGeometry()</li>
<li>DirectShapeType.GetExternallyTaggedGeometry()</li>
<li>DirectShapeType.HasExternallyTaggedGeometry()</li>
<li>DirectShapeType.UpdateExternallyTaggedGeometry()</li>
<li>DirectShapeType.RemoveExternallyTaggedGeometry()</li>
<li>DirectShapeType.ResetExternallyTaggedGeometry()</li>
</ul>
<p>provide a means to add, remove, update, or retrieve an ExternallyTaggedGeometryObject to/from a DirectShape or DirectShapeType.</p>
<p><a name="4.2.5.3"></a><h3 class="new">2.5.3. Custom Family names</h3></p>
<p>The new member:</p>
<ul>
<li>DirectShapeType.SetFamilyName()</li>
</ul>
<p>provides the ability to set a custom Family name for a DirectShapeType.</p>
<p>The new validator:</p>
<ul>
<li>DirectShapeType.CanChangeFamilyName()</li>
</ul>
<p>provides the ability to check if a DirectShapeType supports a custom Family name.  Certain categories do not support custom Family names.</p>
<p><a name="4.2.6"></a><h2 class="new">2.6. Document &amp; Worksharing API additions</h2></p>
<p><a name="4.2.6.1"></a><h3 class="new">2.6.1. Cloud Model API additions</h3></p>
<p>Four new methods allow access to identifying forge IDs for Cloud Models:</p>
<ul>
<li>Document.GetHubId(): ForgeDM hub id where the model locates.</li>
<li>Document.GetProjectId(): ForgeDM project id where the model locates.</li>
<li>Document.GetCloudFolderId(bool forceRefresh): ForgeDM folder id where the model locates.</li>
<li>Document.GetCloudModelUrn(): A ForgeDM Urn identifying the model.</li>
</ul>
<p>These methods all return strings, which will be empty for a document which is not a cloud model.</p>
<p><a name="4.2.6.2"></a><h3 class="new">2.6.2. OpenOptions API</h3></p>
<p>The new property:</p>
<ul>
<li>OpenOptions.IgnoreExtensibleStorageSchemaConflict</li>
</ul>
<p>allows your application to ignore a schema conflict error on open. The default is false. Setting this to true will ignore the exception of schema conflict while opening the model. Data in the existing schema with the conflicting ID will be erased from the model.</p>
<p><a name="4.2.7"></a><h2 class="new">2.7. View API additions</h2></p>
<p><a name="4.2.7.1"></a><h3 class="new">2.7.1. Label for views on sheets (Viewport)</h3></p>
<p>The new property:</p>
<ul>
<li>Viewport.LabelOffset</li>
</ul>
<p>controls the two-dimensional label offset from left bottom corner of the viewport (as established with Rotation set to None) to the left end of the viewport label line.</p>
<p>The new property:</p>
<ul>
<li>Viewport.LabelLineLength</li>
</ul>
<p>controls the length of the viewport label line in sheet space.</p>
<p><a name="4.2.7.2"></a><h3 class="new">2.7.2. Callout view</h3></p>
<p>The new method:</p>
<ul>
<li>View.GetCalloutParentId()</li>
</ul>
<p>returns the ID of a view which this callout references, or InvalidElementId if there is not parent.</p>
<p>The new property:</p>
<ul>
<li>View.IsCallout</li>
</ul>
<p>identifies if the view is a callout view.</p>
<p><a name="4.2.7.3"></a><h3 class="new">2.7.3. Grids in 3D views</h3></p>
<p>Several new methods in View3D control grid visibility in 3D Views:</p>
<ul>
<li>View3D.GetLevelsThatShowGrids()</li>
<li>View3D.ShowGridsOnLevel(ElementId levelId)</li>
<li>View3D.HideGridsOnLevel(ElementId levelId)</li>
<li>View3D.ShowGridsOnLevels(ElementIdset levelIds)</li>
</ul>
<p><a name="4.2.8"></a><h2 class="new">2.8. Graphics API additions</h2></p>
<p><a name="4.2.8.1"></a><h3 class="new">2.8.1. Temporary in-canvas graphics</h3></p>
<p>The new class:</p>
<ul>
<li>TemporaryGraphicsManager</li>
</ul>
<p>allows the creation of temporary graphics in the canvas and can be used to create in-canvas controls.</p>
<p>It has the following members:</p>
<ul>
<li>TemporaryGraphicsManager.GetTemporaryGraphicsManager()</li>
<li>TemporaryGraphicsManager.AddControl()</li>
<li>TemporaryGraphicsManager.UpdateControl()</li>
<li>TemporaryGraphicsManager.RemoveControl()</li>
<li>TemporaryGraphicsManager.SetVisibility()</li>
<li>TemporaryGraphicsManager.GetAll()</li>
<li>TemporaryGraphicsManager.Clear()</li>
</ul>
<p>The new class:</p>
<ul>
<li>InCanvasControlData</li>
</ul>
<p>stores a reference to the image used in the temporary graphics. It has the following properties:</p>
<ul>
<li>InCanvasControlData.ImagePath</li>
<li>InCanvasControlData.Position</li>
</ul>
<p><a name="4.2.9"></a><h2 class="new">2.9. Label API additions</h2></p>
<p>The new methods:</p>
<ul>
<li>Level.GetNearestLevelId(Document document, double elevation)</li>
<li>Level.GetNearestLevelId(Document document, double elevation, out double offset)</li>
</ul>
<p>return the id of the Level which is closest to the specified elevation. The level can be at, above or below the target elevation. If there is more than one Level at the same distance from the elevation, the Level with the lowest id will be returned.</p>
<p><a name="4.2.10"></a><h2 class="new">2.10. Parameter API additions</h2></p>
<p>The new class:</p>
<ul>
<li>Autodesk.Revit.DB.MultipleValuesIndicationSettings</li>
</ul>
<p>allows access to the custom value for used in instances of the Properties Palette, Tags and Schedules when multiple elements are referenced and the value of the parameter is different.</p>
<p>The new members:</p>
<ul>
<li>MultipleValuesIndicationSettings.GetMultipleValuesIndicationSettings()</li>
<li>MultipleValuesIndicationSettings.Custom</li>
<li>MultipleValuesIndicationSettings.CustomValue</li>
<li>MultipleValuesIndicationSettings.Value</li>
</ul>
<p>provide access to the settings in the document, the option for the custom value, and read-only access to the value that will be used (either the custom value or the default).</p>
<p><a name="4.2.11"></a><h2 class="new">2.11. Dimension API additions</h2></p>
<p><a name="4.2.11.1"></a><h3 class="new">2.11.1. Dimension layout</h3></p>
<p>Several new properties allow access to positioning for various parts of a dimension:</p>
<ul>
<li>Dimension.TextPosition</li>
<li>Dimension.LeaderEndPosition</li>
<li>Dimension.HasLeader</li>
<li>SpotDimension.LeaderElbowPosition</li>
<li>SpotDimension.LeaderHasElbow</li>
</ul>
<p><a name="4.2.11.2"></a><h3 class="new">2.11.2. DimensionType prefix/suffix</h3></p>
<p>The new properties:</p>
<ul>
<li>DimensionType.Prefix</li>
<li>DimensionType.Suffix</li>
</ul>
<p>allow access to the corresponding values in the dimension type.</p>
<p><a name="4.2.12"></a><h2 class="new">2.12. Category API additions</h2></p>
<p><a name="4.2.12.1"></a><h3 class="new">2.12.1. Built in Categories</h3></p>
<p>The new methods:</p>
<ul>
<li>Category.GetBuiltInCategoryTypeId(BuiltInCategory)</li>
<li>Category.GetBuiltInCategory(ForgeTypeId)</li>
<li>Category.IsBuiltInCategory(ForgeTypeId)</li>
</ul>
<p>allow access to BuiltInCategories.</p>
<p><a name="4.2.13"></a><h2 class="new">2.13. Shared Coordinates API additions</h2></p>
<p><a name="4.2.13.1"></a><h3 class="new">2.13.1. Reset Shared Coordinates</h3></p>
<p>The new method:</p>
<ul>
<li>Document.ResetSharedCoordinates()</li>
</ul>
<p>resets the shared coordinates for the host model. It provides the same functionality as the UI Command "Reset Shared Coordinates".</p>
<p>After resetting coordinates, the following changes will take place:</p>
<ol>
<li>GIS coordinate system will be erased</li>
<li>Shared coordinates relationships with other linked models will be eliminated.</li>
<li>The Survey Point will be moved back to the startup location, where it coincides with the Internal Origin.</li>
<li>The angle between Project North and True North will be reset to 0.</li>
</ol>
<p>Note: There will be no changes to linked models.</p>
<p><a name="4.2.13.2"></a><h3 class="new">2.13.2. Clipped state of BasePoint</h3></p>
<p>The new property:</p>
<ul>
<li>bool BasePoint.Clipped</li>
</ul>
<p>will get or set the clipped state of the survey point BasePoint based on the active ProjectLocation of its Document. For the project base point, the get method will always return false, and the set method will throw an exception.</p>
<p><a name="4.2.14"></a><h2 class="new">2.14. Revision API additions</h2></p>
<p>Revision sequences and API additions</p>
<p>The new class:</p>
<ul>
<li>Autodesk.Revit.DB.RevisionNumberingSequence</li>
</ul>
<p>defines the sequences by which numbers are assigned to Revisions. Revision numbering is either numeric or alphanumeric. Revision numbering is assigned to Revisions to control the numbering scheme of that Revision. Alphanumeric from the API corresponds to the UI concept of "Custom".</p>
<p>The new members:</p>
<ul>
<li>RevisionNumberingSequence.CreateNumericSequence()</li>
<li>RevisionNumberingSequence.CreateAlphanumericSequence()</li>
<li>RevisionNumberingSequence.GetSequenceName()</li>
<li>RevisionNumberingSequence.SetSequenceName()</li>
<li>RevisionNumberingSequence.GetNumericRevisionSettings()</li>
<li>RevisionNumberingSequence.SetNumericRevisionSettings()</li>
<li>RevisionNumberingSequence.GetAlphanumericRevisionSettings()</li>
<li>RevisionNumberingSequence.SetAlphanumericRevisionSettings()</li>
<li>RevisionNumberingSequence.GetAllRevisionNumberingSequences()</li>
<li>RevisionNumberingSequence.HasValidRevisionSettingsForNumberType()</li>
<li>RevisionNumberingSequence.HasValidNumericRevisionSettings()</li>
<li>RevisionNumberingSequence.HasValidAlphanumericRevisionSettings()</li>
<li>RevisionNumberingSequence.NumberType</li>
</ul>
<p>provide the ability to create, read and modify the settings related to Revision numbering sequences.</p>
<p>The new methods:</p>
<ul>
<li>Revision.GetRevisionNumberingSequenceId()</li>
<li>Revision.SetRevisionNumberingSequenceId()</li>
</ul>
<p>provide access to the id of the revision numbering sequence which controls this revision's numbering:</p>
<p>The new methods:</p>
<ul>
<li>NumericRevisionSettings.GetMinimumDigits() &ndash; get the minimum number of digits for a revision number.</li>
<li>NumericRevisionSettings.SetMinimumDigits() &ndash; set the minimum number of digits for a revision number.</li>
</ul>
<p>provide access to the setting controlling the minimum number of digits for a revision number.</p>
<p><a name="4.2.15"></a><h2 class="new">2.15. Phasing API additions</h2></p>
<p>The new methods:</p>
<ul>
<li>Element.IsDemolishedPhaseOrderValid()</li>
<li>Element.IsCreatedPhaseOrderValid()</li>
</ul>
<p>validate the order of phases on a given element with respect to the input phase id, ensuring that an object is not assigned a phase where it is demolished before it was created.</p>
<p><a name="4.2.16"></a><h2 class="new">2.16. Geometry API additions</h2></p>
<p>The new property:</p>
<ul>
<li>Mesh.IsClosed</li>
</ul>
<p>checks if each edge in the mesh belongs to at least two faces.</p>
<p><a name="4.2.17"></a><h2 class="new">2.17. Point Cloud API additions</h2></p>
<p>The new method:</p>
<ul>
<li>PointCloudType.GetReCapProject()</li>
</ul>
<p>provides a direct entry point to get access to an object from the ReCap SDK (ReCapWrapper.RCProject) from Revit. This object represents the point cloud from the RC file path stored in PointCloudType. The ReCap assembly ReCapWrapper.dll will need to be included into code using this method.</p>
<p>The coordinate system in RCProject is defined by the Point Cloud. Please refer to ReCap SDK documentation for RCProject.getCoordinateSystem(). If you need points converted to the modeling coordinate system in Revit, you can obtain the transformation matrix from PointCloudInstance.GetTransform().</p>
<p><a name="4.2.18"></a><h2 class="new">2.18. Schedule API additions</h2></p>
<p><a name="4.2.18.1"></a><h3 class="new">2.18.1. Multiple Value Indication &ndash; schedule customization</h3></p>
<p>The existing class:</p>
<ul>
<li>ScheduleField</li>
</ul>
<p>has several new properties which allow customization of the multiple value indication per field:</p>
<ul>
<li>ScheduleField.MultipleValuesDisplayType</li>
<li>ScheduleField.MultipleValuesText &ndash; The text to be used when a field has multiple values</li>
<li>ScheduleField.MultipleValuesCustomText &ndash; The text to be used when a field has multiple values and the display type is set to ScheduleFieldMultipleValuesDisplayType.Custom</li>
</ul>
<p>The new Enum:</p>
<ul>
<li>ScheduleFieldMultipleValuesDisplayType</li>
</ul>
<p>defines how the schedule field's multiple value indication is displayed (using the project setting, a custom text or a predefined text "<varies>").</p>
<p><a name="4.2.19"></a><h2 class="new">2.19. Import API additions</h2></p>
<p><a name="4.2.19.1"></a><h3 class="new">2.19.1. Import/Link Rhino</h3></p>
<p>The new methods:</p>
<ul>
<li>Document.Import(String, ImportOptions3DM, View)</li>
<li>Document.Link(String, ImportOptions3DM, View)</li>
</ul>
<p>import or link a 3DM file into the document.</p>
<p><a name="4.2.20"></a><h2 class="new">2.20. Structural API additions</h2></p>
<p><a name="4.2.20.1"></a><h3 class="new">2.20.1. Moving individual rebar in a Rebar Set</h3></p>
<p>The new methods:</p>
<ul>
<li>Rebar.MoveBarInSet()</li>
<li>Rebar.GetBarIndexFromReference()</li>
<li>Rebar.GetMovedBarTransform()</li>
<li>Rebar.ResetMovedBarTransform()</li>
</ul>
<p>allow an application to move an individual bar, and to read and reset the transform of the individual bar in a Rebar Set.</p>
<p><a name="4.2.20.2"></a><h3 class="new">2.20.2. Removing individual bars from a Rebar Set</h3></p>
<p>The new function:</p>
<ul>
<li>Rebar.SetBarIncluded()</li>
</ul>
<p>allows you to designate a particular bar at a given index to be included or not.</p>
<p>The existing properties:</p>
<ul>
<li>Rebar.IncludeFirstBar</li>
<li>Rebar.IncludeFirstBar</li>
</ul>
<p>continue to function as before, and setting these to true are equivalent to removing the bar at the first or last position index.</p>
<p>The existing function:</p>
<ul>
<li>Rebar.DoesBarExistAtPosition()</li>
</ul>
<p>now supports returning false for any bar position index and not just the first or last bar.</p>
<p><a name="4.2.20.3"></a><h3 class="new">2.20.3. Moving and Removing bars owned by PathReinforcement</h3></p>
<p>The new methods:</p>
<ul>
<li>RebarInSystem.SetBarIncluded()</li>
<li>RebarInSystem.MoveBarInSet()</li>
<li>RebarInSystem.GetMovedBarTransform()</li>
<li>RebarInSystem.ResetMovedBarTransform()</li>
<li>RebarInSystem.CanEditIndividualBars()</li>
</ul>
<p>provide access to move, include or remove individual bars only for RebarInSystem elements that are owned by PathReinforcement.  (This is not supported for RebarInSystem owned by AreaReinforcement).</p>
<p><a name="4.2.20.4"></a><h3 class="new">2.20.4. Area Reinforcement Layers</h3></p>
<p>The new methods:</p>
<ul>
<li>AreaReinforcement.GetNumberOfLines()</li>
<li>AreaReinforcement.GetLineFromLayerAtIndex()</li>
<li>AreaReinforcement.SetLineIncluded()</li>
<li>AreaReinforcement.IsLineIncluded()</li>
<li>AreaReinforcement.MoveLine()</li>
<li>AreaReinforcement.GetMovedLineTransform()</li>
<li>AreaReinforcement.ResetMovedLineTransform()</li>
<li>AreaReinforcement.SetLayerActive()</li>
<li>AreaReinforcement.IsLayerActive()</li>
<li>AreaReinforcement.GetLayerDirection()</li>
</ul>
<p>provide access to the layers of Area Reinforcement elements, and to manipulate (move and remove) the individual lines exposed through those layers.</p>
<p><a name="4.2.20.5"></a><h3 class="new">2.20.5. Rebar conversion</h3></p>
<p>The new methods:</p>
<ul>
<li>AreaReinforcement.ConvertRebarInSystemToRebars()</li>
<li>PathReinforcement.ConvertRebarInSystemToRebars()</li>
</ul>
<p>convert all of the RebarInSystem elements owned by the input element into equivalent Rebar elements.</p>
<p><a name="4.2.20.6"></a><h3 class="new">2.20.6. Rebar geometry</h3></p>
<p>The new methods:</p>
<ul>
<li>Rebar.GetTransformedCenterlineCurves()</li>
<li>RebarInSystem.GetTransformedCenterlineCurves()</li>
</ul>
<p>return the centerline curves for a given bar, where the geometry of the curves are in the actual transformed position. The BarPositionTransform (representing the relative position of any individual bar in the set &ndash; a translation along the distribution path) and MovedBarTransform (representing the movement of the bar relative to its default position along the distribution path) will be applied to the returned curves.</p>
<p><a name="4.2.20.7"></a><h3 class="new">2.20.7. Freeform Rebar</h3></p>
<p>The new properties:</p>
<ul>
<li>RebarFreeFormAccessor.RebarStyle</li>
<li>RebarFreeFormAccessor.StirrupTieAttachmentType</li>
</ul>
<p>provides read and write access to the corresponding properties of freeform rebar elements.</p>
<p>The new method:</p>
<ul>
<li>RebarFreeFormAccessor.SetReportedShape()</li>
</ul>
<p>changes the rebar shape of a freeform rebar that is currently using the RebarWorkInstructions.Straight option to the provided rebar shape.</p>
<p><a name="4.2.21"></a><h2 class="new">2.21. MEP API additions</h2></p>
<p><a name="4.2.21.1"></a><h3 class="new">2.21.1. Building and Space Type additions</h3></p>
<p>Several new properties have been added for Building and Space Types:</p>
<ul>
<li>HVACLoadType.HeatingSetPoint &ndash; The heating temperature set point in unit Kelvin (K).</li>
<li>HVACLoadType.CoolingSetPoint &ndash; The cooling temperature set point in unit Kelvin (K).</li>
<li>HVACLoadType.HumidificationSetPoint &ndash; The humidification set point as a number between 0 and 1.</li>
<li>HVACLoadType.DehumidificationSetPoint &ndash; The dehumidification set point as a number between 0 and 1.</li>
</ul>
<p><a name="4.2.21.2"></a><h3 class="new">2.21.2. Zone additions</h3></p>
<p>The new property:</p>
<ul>
<li>GenericZone.LevelOffset</li>
</ul>
<p>gets or sets the offset distance from this zone to the associated level.</p>
<p><a name="4.2.21.3"></a><h3 class="new">2.21.3. Mechanical Systems Analysis Set Points</h3></p>
<p>The new properties:</p>
<ul>
<li>HVACLoadType.HeatingSetPoint</li>
<li>HVACLoadType.CoolingSetPoint</li>
<li>HVACLoadType.HumidificationSetPoint</li>
<li>HVACLoadType.DehumidificationSetPoint</li>
</ul>
<p>provide access to the heating temperature, cooling temperature, humidification and dehumidifcation set point values.  Temperature set points are in Kelvin, while humidity set points are percentages ranging from 0 to 1.</p>
<p><a name="4.2.21.4"></a><h3 class="new">2.21.4. Analysis Report Style</h3></p>
<p>The new property:</p>
<ul>
<li>ViewSystemsAnalysisReport.ReportStyle</li>
</ul>
<p>accesses the report style used in a particular analysis report view.</p>
<p><a name="4.2.21.5"></a><h3 class="new">2.21.5. MEP Hidden Line Settings</h3></p>
<p>The new class:</p>
<ul>
<li>Autodesk.Revit.DB.Mechanical.MEPHiddenLineSettings</li>
</ul>
<p>represents the settings of the mechanical hidden line display (e.g. ducts and pipes). It can be obtained from the static method:</p>
<ul>
<li>MEPHiddenLineSettings.GetMEPHiddenLineSettings(Document)</li>
</ul>
<p>It offers the following properties:</p>
<ul>
<li>MEPHiddenLineSettings.DrawHiddenLine</li>
<li>MEPHiddenLineSettings.LineStyle</li>
<li>MEPHiddenLineSettings.InsideGap</li>
<li>MEPHiddenLineSettings.OutsideGap</li>
<li>MEPHiddenLineSettings.SingleLineGap</li>
</ul>
<p><a name="4.2.21.6"></a><h3 class="new">2.21.6. Electrical Panel Schedule</h3></p>
<p>The new property:</p>
<ul>
<li>PanelScheduleData.IsAutoShadingForLoadDisplay</li>
</ul>
<p>indicates if a panel schedule will display shading for Load cells automatically.</p>
<p><a name="4.2.21.7"></a><h3 class="new">2.21.7. Conversion to Fabrication</h3></p>
<p>The new method to the DesignToFabricationConverter class:</p>
<ul>
<li>DesignToFabricationConverter.SetMapForFamilySymbolToFabricationPartType()</li>
</ul>
<p>The method will set a map used when the design to fabrication tool is running.  The map relationships will be used to replace any family instance that is based upon the family symbols found in the map with the corresponding fabrication part for the fabrication part type set in the mapping.</p>
<p><a name="4.2.22"></a><h2 class="new">2.22. Energy Analysis API additions</h2></p>
<p>The options used to produce an energy model or export to gbXML have been unified.</p>
<p>The new enumeration value:</p>
<ul>
<li>AnalysisMode.RoomsOrSpaces</li>
</ul>
<p>indicates that the energy analysis model should be based on volumes from rooms or spaces defined in the building model.</p>
<p>The new enumeration values:</p>
<ul>
<li>EnergyModelType.AnalysisMode</li>
<li>ExportEnergyModelType.AnalysisMode</li>
</ul>
<p>allow specification of the energy model production based on the given analysis type.</p>